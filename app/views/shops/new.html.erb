<div class="container">
  <div class="row justify-content-center mt-5">
    <div class="mb-3">
      <h1 class="mb-3">Créez votre magasin</h1>
      <%= simple_form_for(@shop) do |f| %>
        <%= f.error_notification %>
        <%= f.error_notification message: f.object.errors[:base].to_sentence if f.object.errors[:base].present? %>

        <div class="form-inputs">
          <%= f.input :name, label: "Nom" %>
          <%= f.input :description, label: "Description de votre magasin" %>
          <%= f.input :address, label: "Adresse de votre magasin" %>
          <%= f.input :phone, label: "Téléphone" %>
          <%= f.input :siren, label: "Numéro de SIREN" %>
          <table class="schedule-editor">
            <thead>
              <tr>
                <th class= "text-center">Jour</th>
                <th class= "text-center">Matin</th>
                <th class= "text-center">Matin</th>
                <th class= "text-center">Après-midi</th>
                <th class= "text-center">Après-midi</th>
              </tr>
            </thead>
            <tbody>
              <% weekdays.each do |day| %>
                <%= f.simple_fields_for :schedules, f.object.schedules.find_or_initialize_by(weekday: day[:value]) do |sched| %>
                  <tr>
                    <td>
                      <%= sched.hidden_field :weekday %>
                      <div class="checkbox m-3">
                        <%#= sched.input :_destroy, ({checked: sched.object.persisted?} ? :false : :true) %>
                        <%= sched.label :_destroy, day[:label] %>
                      </div>
                    </td>
                    <td>
                      <%= sched.input :am_opens_at, class: "visually-hidden", label: "Ouvre à" %>
                    </td>
                    <td>
                      <%= sched.input :am_closes_at, class: "visually-hidden", label: "Ferme à" %>
                    </td>
                    <td>
                      <%= sched.input :pm_opens_at, class: "visually-hidden", label: "Ouvre à" %>
                    </td>
                    <td>
                      <%= sched.input :pm_closes_at, class: "visually-hidden", label: "Ferme à" %>
                    </td>
                  </tr>
                <% end %>
              <% end %>
            </tbody>
          </table>
        </div>

        <div class="form-actions">
            <%= f.button :submit, class:"btn btn-dark", value:"Créer mon magasin"%>
        </div>
      <% end %>
    </div>
  </div>
</div>
